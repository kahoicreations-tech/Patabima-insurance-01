import React from 'react';
import { View, Text, TouchableOpacity, Animated, StyleSheet } from 'react-native';
import { NavigationContainer } from '@react-navigation/native';
import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';
import { createNativeStackNavigator } from '@react-navigation/native-stack';
import { Ionicons } from '@expo/vector-icons';
import { useSafeAreaInsets } from 'react-native-safe-area-context';

// Import screens
import HomeScreen from '../screens/home/HomeScreen';
import QuotationsScreen from '../screens/quotations/QuotationsScreen';
import UpcomingScreen from '../screens/upcoming/UpcomingScreen';
import AccountScreen from '../screens/account/AccountScreen';
import MotorDashboardScreen from '../screens/quotations/motor/MotorDashboardScreen';
import EnhancedMotorProductSelectionScreen from '../screens/quotations/motor/EnhancedMotorProductSelectionScreen';
import TORQuotationFlowScreen from '../screens/quotations/motor/TORQuotationFlowScreen';
import PrivateThirdPartyScreen from '../screens/quotations/motor/PrivateThirdPartyScreen';
import CommercialThirdPartyScreen from '../screens/quotations/motor/CommercialThirdPartyScreen';
import PSVThirdPartyScreen from '../screens/quotations/motor/PSVThirdPartyScreen';
import MotorcycleThirdPartyScreen from '../screens/quotations/motor/MotorcycleThirdPartyScreen';

const Stack = createNativeStackNavigator();
const Tab = createBottomTabNavigator();

// Main tab navigator for bottom tabs
function MainTabNavigator() {
  return (
    <Tab.Navigator
      screenOptions={{
        headerShown: false,
        tabBarStyle: {
          backgroundColor: '#FFFFFF',
          borderTopWidth: 1,
          borderTopColor: '#E5E5E5',
          height: 60,
          paddingBottom: 8,
          paddingTop: 8,
        },
      }}
    >
      <Tab.Screen
        name="Home"
        component={HomeScreen}
        options={{
          tabBarLabel: 'Home',
          tabBarIcon: ({ color, size }) => (
            <Ionicons name="home-outline" size={size} color={color} />
          ),
        }}
      />
      <Tab.Screen
        name="Quotations"
        component={QuotationsScreen}
        options={{
          tabBarLabel: 'Quotations',
          tabBarIcon: ({ color, size }) => (
            <Ionicons name="document-text-outline" size={size} color={color} />
          ),
        }}
      />
      <Tab.Screen
        name="Upcoming"
        component={UpcomingScreen}
        options={{
          tabBarLabel: 'Upcoming',
          tabBarIcon: ({ color, size }) => (
            <Ionicons name="calendar-outline" size={size} color={color} />
          ),
        }}
      />
      <Tab.Screen
        name="Account"
        component={AccountScreen}
        options={{
          tabBarLabel: 'Account',
          tabBarIcon: ({ color, size }) => (
            <Ionicons name="person-outline" size={size} color={color} />
          ),
        }}
      />
    </Tab.Navigator>
  );
}

// Main App Navigator with all screens
function AppNavigator() {
  return (
    <NavigationContainer>
      <Stack.Navigator
        screenOptions={{
          headerShown: false
        }}
      >
        <Stack.Screen name="MainTabs" component={MainTabNavigator} />
        <Stack.Screen name="MotorDashboard" component={MotorDashboardScreen} />
        <Stack.Screen 
          name="EnhancedMotorProductSelection" 
          component={EnhancedMotorProductSelectionScreen} 
        />
        <Stack.Screen name="TORQuotationFlow" component={TORQuotationFlowScreen} />
        <Stack.Screen name="PrivateThirdParty" component={PrivateThirdPartyScreen} />
        <Stack.Screen name="CommercialThirdParty" component={CommercialThirdPartyScreen} />
        <Stack.Screen name="PSVThirdParty" component={PSVThirdPartyScreen} />
        <Stack.Screen name="MotorcycleThirdParty" component={MotorcycleThirdPartyScreen} />
      </Stack.Navigator>
    </NavigationContainer>
  );
}

export default AppNavigator;
